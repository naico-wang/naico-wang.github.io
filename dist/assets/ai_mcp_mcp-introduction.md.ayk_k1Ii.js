import{_ as p,I as t,o as r,c as h,a6 as a,J as i,w as e}from"./chunks/framework.NCXUupj9.js";const u=JSON.parse('{"title":"MCP 总览","description":"","frontmatter":{"title":"MCP 总览","position":1},"headers":[],"relativePath":"ai/mcp/mcp-introduction.md","filePath":"ai/mcp/mcp-introduction.md","lastUpdated":1771245779000}'),k={name:"ai/mcp/mcp-introduction.md"};function B(d,s,o,F,c,g){const n=t("MermaidChart"),l=t("ClientOnly");return r(),h("div",null,[s[0]||(s[0]=a('<h1 id="mcp-model-context-protocol-总览" tabindex="-1">MCP (Model Context Protocol) 总览 <a class="header-anchor" href="#mcp-model-context-protocol-总览" aria-label="Permalink to “MCP (Model Context Protocol) 总览”">​</a></h1><div class="tip custom-block"><p class="custom-block-title">文档说明</p><p>本文介绍 MCP 的核心概念、架构设计和应用场景，帮助你快速理解这个连接 AI 应用与外部系统的开放标准。</p><p><strong>规范版本</strong>: 2025-11-25<br><strong>官方文档</strong>: <a href="https://modelcontextprotocol.io/specification/2025-11-25" target="_blank" rel="noreferrer">https://modelcontextprotocol.io/specification/2025-11-25</a></p></div><h2 id="什么是-mcp" tabindex="-1">什么是 MCP? <a class="header-anchor" href="#什么是-mcp" aria-label="Permalink to “什么是 MCP?”">​</a></h2><h3 id="核心定义" tabindex="-1">核心定义 <a class="header-anchor" href="#核心定义" aria-label="Permalink to “核心定义”">​</a></h3><p><strong>MCP (Model Context Protocol)</strong> 是一个开源标准协议，用于将 AI 应用与外部数据源、工具和服务安全连接。</p><p>通过 MCP，AI 应用（如 Claude、ChatGPT）可以统一访问:</p><ul><li><strong>数据源</strong>: 本地文件、数据库、云存储</li><li><strong>工具</strong>: 搜索引擎、计算器、API 服务</li><li><strong>工作流</strong>: 提示词模板、自动化流程</li></ul><h3 id="架构全景" tabindex="-1">架构全景 <a class="header-anchor" href="#架构全景" aria-label="Permalink to “架构全景”">​</a></h3>',8)),i(l,null,{default:e(()=>[i(n,{code:"flowchart%20LR%0A%20%20%20%20%25%25%20%E5%AE%9A%E4%B9%89%E6%A0%B7%E5%BC%8F%0A%20%20%20%20classDef%20aiApp%20fill%3A%23e1f5ff%2Cstroke%3A%2301579b%2Cstroke-width%3A2px%0A%20%20%20%20classDef%20protocol%20fill%3A%23fff3e0%2Cstroke%3A%23e65100%2Cstroke-width%3A3px%0A%20%20%20%20classDef%20data%20fill%3A%23f3e5f5%2Cstroke%3A%234a148c%2Cstroke-width%3A2px%0A%0A%20%20%20%20%25%25%20%E5%B7%A6%E4%BE%A7%20-%20AI%20%E5%BA%94%E7%94%A8%0A%20%20%20%20subgraph%20AI%5B%22AI%20%E5%BA%94%E7%94%A8%E5%B1%82%22%5D%0A%20%20%20%20%20%20%20%20direction%20TB%0A%20%20%20%20%20%20%20%20Chat%5B%22%E8%81%8A%E5%A4%A9%E7%95%8C%E9%9D%A2%3Cbr%2F%3EClaude%20Desktop%2C%20LibreChat%22%5D%0A%20%20%20%20%20%20%20%20IDE%5B%22%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%3Cbr%2F%3EClaude%20Code%2C%20Goose%22%5D%0A%20%20%20%20%20%20%20%20Other%5B%22%E5%85%B6%E4%BB%96%E5%BA%94%E7%94%A8%3Cbr%2F%3E5ire%2C%20Superinterface%22%5D%0A%20%20%20%20end%0A%0A%20%20%20%20%25%25%20%E4%B8%AD%E9%97%B4%20-%20MCP%20%E5%8D%8F%E8%AE%AE%0A%20%20%20%20MCP%5B%22%3Cb%3EMCP%20%E5%8D%8F%E8%AE%AE%3C%2Fb%3E%3Cbr%2F%3E%E6%A0%87%E5%87%86%E5%8C%96%E9%80%9A%E4%BF%A1%E5%B1%82%22%5D%0A%0A%20%20%20%20%25%25%20%E5%8F%B3%E4%BE%A7%20-%20%E6%95%B0%E6%8D%AE%E6%BA%90%E5%92%8C%E5%B7%A5%E5%85%B7%0A%20%20%20%20subgraph%20Data%5B%22%E6%95%B0%E6%8D%AE%E4%B8%8E%E5%B7%A5%E5%85%B7%E5%B1%82%22%5D%0A%20%20%20%20%20%20%20%20direction%20TB%0A%20%20%20%20%20%20%20%20Storage%5B%22%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%3Cbr%2F%3EPostgreSQL%2C%20SQLite%2C%20GDrive%22%5D%0A%20%20%20%20%20%20%20%20Dev%5B%22%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%3Cbr%2F%3EGit%2C%20Sentry%2C%20Docker%22%5D%0A%20%20%20%20%20%20%20%20Prod%5B%22%E7%94%9F%E4%BA%A7%E5%8A%9B%E5%B7%A5%E5%85%B7%3Cbr%2F%3ESlack%2C%20Google%20Maps%2C%20Notion%22%5D%0A%20%20%20%20end%0A%0A%20%20%20%20%25%25%20%E8%BF%9E%E6%8E%A5%E5%85%B3%E7%B3%BB%0A%20%20%20%20Chat%20%3C--%3E%20MCP%0A%20%20%20%20IDE%20%3C--%3E%20MCP%0A%20%20%20%20Other%20%3C--%3E%20MCP%0A%0A%20%20%20%20MCP%20%3C--%3E%20Storage%0A%20%20%20%20MCP%20%3C--%3E%20Dev%0A%20%20%20%20MCP%20%3C--%3E%20Prod%0A%0A%20%20%20%20%25%25%20%E5%BA%94%E7%94%A8%E6%A0%B7%E5%BC%8F%0A%20%20%20%20class%20Chat%2CIDE%2COther%20aiApp%0A%20%20%20%20class%20MCP%20protocol%0A%20%20%20%20class%20Storage%2CDev%2CProd%20data%0A",showToolbar:"1"})]),_:1}),s[1]||(s[1]=a(`<h2 id="为什么选择-mcp" tabindex="-1">为什么选择 MCP? <a class="header-anchor" href="#为什么选择-mcp" aria-label="Permalink to “为什么选择 MCP?”">​</a></h2><h3 id="解决的核心问题" tabindex="-1">解决的核心问题 <a class="header-anchor" href="#解决的核心问题" aria-label="Permalink to “解决的核心问题”">​</a></h3><p>在 MCP 出现之前，AI 应用连接外部系统面临以下挑战：</p><table tabindex="0"><thead><tr><th>传统方案</th><th>存在问题</th><th>MCP 解决方案</th></tr></thead><tbody><tr><td>为每个 AI 应用单独集成</td><td>重复开发，维护成本高</td><td>一次开发，处处可用</td></tr><tr><td>使用私有协议</td><td>供应商锁定，迁移困难</td><td>开放标准，自由切换</td></tr><tr><td>缺乏统一安全机制</td><td>安全风险高，审计困难</td><td>标准化认证和授权</td></tr><tr><td>手动管理上下文</td><td>易出错,效率低</td><td>自动化上下文管理</td></tr></tbody></table><h3 id="典型应用场景" tabindex="-1">典型应用场景 <a class="header-anchor" href="#典型应用场景" aria-label="Permalink to “典型应用场景”">​</a></h3><p><strong>1. 企业知识库接入</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span>场景: 让 AI 助手访问公司内部文档、Wiki、数据库</span></span>
<span class="line"><span>方案: 部署 MCP Server 连接企业数据源</span></span>
<span class="line"><span>效果: 员工可以用自然语言查询公司知识</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>2. 开发工具链集成</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span>场景: AI 辅助编程时需要访问 Git、CI/CD、监控系统</span></span>
<span class="line"><span>方案: 使用现成的 MCP Server (Git, Sentry, etc.)</span></span>
<span class="line"><span>效果: AI 可以读取代码、查看错误日志、触发构建</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>3. 自动化工作流</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span>场景: 通过 AI 自动处理重复性任务</span></span>
<span class="line"><span>方案: 开发自定义 MCP Server 暴露业务工具</span></span>
<span class="line"><span>效果: 用对话方式完成复杂操作(如生成报告、发送通知)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="生态系统对比" tabindex="-1">生态系统对比 <a class="header-anchor" href="#生态系统对比" aria-label="Permalink to “生态系统对比”">​</a></h3><p>MCP 与其他 AI 开发框架的关系：</p>`,13)),i(l,null,{default:e(()=>[i(n,{code:"graph%20TD%0A%20%20%20%20A%5BAI%20%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E9%9C%80%E6%B1%82%5D%20--%3E%20B%7B%E9%80%89%E6%8B%A9%E6%96%B9%E6%A1%88%7D%0A%20%20%20%20%0A%20%20%20%20B%20--%3E%7C%E5%85%A8%E6%A0%88%E6%A1%86%E6%9E%B6%7C%20C%5BLangChain%2FLangGraph%5D%0A%20%20%20%20B%20--%3E%7C%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%B9%B3%E5%8F%B0%7C%20D%5Bn8n%2FDify%5D%0A%20%20%20%20B%20--%3E%7C%E6%A0%87%E5%87%86%E5%8C%96%E9%9B%86%E6%88%90%7C%20E%5BMCP%5D%0A%20%20%20%20%0A%20%20%20%20C%20--%3E%20F%5B%E4%BC%98%E5%8A%BF%3A%20%E5%8A%9F%E8%83%BD%E4%B8%B0%E5%AF%8C%3Cbr%2F%3E%E5%8A%A3%E5%8A%BF%3A%20%E5%AD%A6%E4%B9%A0%E6%9B%B2%E7%BA%BF%E9%99%A1%5D%0A%20%20%20%20D%20--%3E%20G%5B%E4%BC%98%E5%8A%BF%3A%20%E5%8F%AF%E8%A7%86%E5%8C%96%E9%85%8D%E7%BD%AE%3Cbr%2F%3E%E5%8A%A3%E5%8A%BF%3A%20%E7%81%B5%E6%B4%BB%E6%80%A7%E5%8F%97%E9%99%90%5D%0A%20%20%20%20E%20--%3E%20H%5B%E4%BC%98%E5%8A%BF%3A%20%E6%A0%87%E5%87%86%E5%8C%96%2B%E8%BD%BB%E9%87%8F%E7%BA%A7%3Cbr%2F%3E%E5%8A%A3%E5%8A%BF%3A%20%E9%9C%80%E8%87%AA%E8%A1%8C%E7%BB%84%E5%90%88%5D%0A%20%20%20%20%0A%20%20%20%20style%20E%20fill%3A%23e1f5ff%2Cstroke%3A%2301579b%2Cstroke-width%3A3px%0A",showToolbar:"1"})]),_:1}),s[2]||(s[2]=a('<p><strong>MCP 的定位</strong>：专注于<strong>连接层标准化</strong>，而非全栈解决方案。可与 LangChain/Dify 等框架配合使用。</p><h2 id="mcp-架构详解" tabindex="-1">MCP 架构详解 <a class="header-anchor" href="#mcp-架构详解" aria-label="Permalink to “MCP 架构详解”">​</a></h2><h3 id="核心组件" tabindex="-1">核心组件 <a class="header-anchor" href="#核心组件" aria-label="Permalink to “核心组件”">​</a></h3><p>MCP 采用<strong>客户端-服务器</strong>架构，涉及三个核心角色：</p>',4)),i(l,null,{default:e(()=>[i(n,{code:"graph%20TB%0A%20%20%20%20subgraph%20Host%5B%22MCP%20Host%20(%E5%AE%BF%E4%B8%BB%E5%BA%94%E7%94%A8)%22%5D%0A%20%20%20%20%20%20%20%20direction%20LR%0A%20%20%20%20%20%20%20%20UI%5B%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2%5D%0A%20%20%20%20%20%20%20%20Manager%5B%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20LLM%5B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20Clients%5B%22MCP%20Clients%22%5D%0A%20%20%20%20%20%20%20%20C1%5BClient%201%5D%0A%20%20%20%20%20%20%20%20C2%5BClient%202%5D%0A%20%20%20%20%20%20%20%20C3%5BClient%203%5D%0A%20%20%20%20%20%20%20%20C4%5BClient%204%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20Servers%5B%22MCP%20Servers%22%5D%0A%20%20%20%20%20%20%20%20S1%5B%22Server%20A%20-%20%E6%9C%AC%E5%9C%B0%3Cbr%2F%3E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%22%5D%0A%20%20%20%20%20%20%20%20S2%5B%22Server%20B%20-%20%E6%9C%AC%E5%9C%B0%3Cbr%2F%3E%E6%95%B0%E6%8D%AE%E5%BA%93%22%5D%0A%20%20%20%20%20%20%20%20S3%5B%22Server%20C%20-%20%E8%BF%9C%E7%A8%8B%3Cbr%2F%3ESentry%20API%22%5D%0A%20%20%20%20end%0A%0A%20%20%20%20Manager%20--%3E%20C1%20%26%20C2%20%26%20C3%20%26%20C4%0A%20%20%20%20%0A%20%20%20%20C1%20-.%E4%B8%93%E7%94%A8%E8%BF%9E%E6%8E%A5.-%3E%20S1%0A%20%20%20%20C2%20-.%E4%B8%93%E7%94%A8%E8%BF%9E%E6%8E%A5.-%3E%20S2%0A%20%20%20%20C3%20-.%E4%B8%93%E7%94%A8%E8%BF%9E%E6%8E%A5.-%3E%20S3%0A%20%20%20%20C4%20-.%E4%B8%93%E7%94%A8%E8%BF%9E%E6%8E%A5.-%3E%20S3%0A%0A%20%20%20%20style%20Host%20fill%3A%23e8f5e9%2Cstroke%3A%232e7d32%0A%20%20%20%20style%20Clients%20fill%3A%23fff3e0%2Cstroke%3A%23e65100%0A%20%20%20%20style%20Servers%20fill%3A%23f3e5f5%2Cstroke%3A%234a148c%0A",showToolbar:"1"})]),_:1}),s[3]||(s[3]=a('<h4 id="_1-mcp-host-宿主应用" tabindex="-1">1. MCP Host (宿主应用) <a class="header-anchor" href="#_1-mcp-host-宿主应用" aria-label="Permalink to “1. MCP Host (宿主应用)”">​</a></h4><table tabindex="0"><thead><tr><th>职责</th><th>典型实现</th></tr></thead><tbody><tr><td>协调多个 MCP Client</td><td>Claude Desktop / Codex 等桌面应用</td></tr><tr><td>提供用户交互界面</td><td>Claude Code / OpenCode 等命令行工具</td></tr><tr><td>管理 AI 模型调用</td><td>自定义聊天应用</td></tr></tbody></table><h4 id="_2-mcp-client-客户端" tabindex="-1">2. MCP Client (客户端) <a class="header-anchor" href="#_2-mcp-client-客户端" aria-label="Permalink to “2. MCP Client (客户端)”">​</a></h4><table tabindex="0"><thead><tr><th>职责</th><th>重要特性</th></tr></thead><tbody><tr><td>维护与单个 Server 的连接</td><td>一个 Client 只连接一个 Server</td></tr><tr><td>获取上下文数据供 Host 使用</td><td>一个 Host 可管理多个 Client</td></tr><tr><td>处理协议层通信</td><td>支持动态连接/断开</td></tr></tbody></table><h4 id="_3-mcp-server-服务器" tabindex="-1">3. MCP Server (服务器) <a class="header-anchor" href="#_3-mcp-server-服务器" aria-label="Permalink to “3. MCP Server (服务器)”">​</a></h4><p><strong>职责</strong>:</p><ul><li>提供工具、资源、提示词</li><li>处理 Client 请求</li><li>发送实时更新通知</li></ul><p><strong>部署模式</strong>:</p><table tabindex="0"><thead><tr><th>类型</th><th>传输方式</th><th>部署位置</th><th>典型场景</th></tr></thead><tbody><tr><td>本地 Server</td><td><strong>STDIO</strong></td><td>同一台机器</td><td>文件系统访问、本地数据库</td></tr><tr><td>远程 Server</td><td><strong>HTTP</strong></td><td>云端/其他主机</td><td>SaaS API、企业内网服务</td></tr></tbody></table><h2 id="协议分层设计" tabindex="-1">协议分层设计 <a class="header-anchor" href="#协议分层设计" aria-label="Permalink to “协议分层设计”">​</a></h2><p>MCP 采用<strong>两层架构</strong>,清晰分离通信机制与业务逻辑:</p>',11)),i(l,null,{default:e(()=>[i(n,{code:"graph%20TB%0A%20%20%20%20subgraph%20Data%5B%22%E6%95%B0%E6%8D%AE%E5%B1%82%20(%E5%86%85%E5%B1%82)%22%5D%0A%20%20%20%20%20%20%20%20direction%20TB%0A%20%20%20%20%20%20%20%20D1%5B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86%5D%0A%20%20%20%20%20%20%20%20D2%5B%E5%B7%A5%E5%85%B7%20Tools%5D%0A%20%20%20%20%20%20%20%20D3%5B%E8%B5%84%E6%BA%90%20Resources%5D%0A%20%20%20%20%20%20%20%20D4%5B%E6%8F%90%E7%A4%BA%E8%AF%8D%20Prompts%5D%0A%20%20%20%20%20%20%20%20D5%5B%E9%87%87%E6%A0%B7%20Sampling%5D%0A%20%20%20%20%20%20%20%20D6%5B%E9%80%9A%E7%9F%A5%20Notifications%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20Transport%5B%22%E4%BC%A0%E8%BE%93%E5%B1%82%20(%E5%A4%96%E5%B1%82)%22%5D%0A%20%20%20%20%20%20%20%20direction%20TB%0A%20%20%20%20%20%20%20%20T1%5BSTDIO%20%E4%BC%A0%E8%BE%93%5D%0A%20%20%20%20%20%20%20%20T2%5BHTTP%20%E4%BC%A0%E8%BE%93%5D%0A%20%20%20%20%20%20%20%20T3%5B%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B%5D%0A%20%20%20%20%20%20%20%20T4%5B%E8%AE%A4%E8%AF%81%E6%8E%88%E6%9D%83%5D%0A%20%20%20%20%20%20%20%20T5%5B%E6%B6%88%E6%81%AF%E6%A1%86%E6%9E%B6%5D%0A%20%20%20%20end%0A%0A%20%20%20%20Data%20--%3E%20Transport%0A%20%20%20%20%0A%20%20%20%20style%20Data%20fill%3A%23e1f5ff%2Cstroke%3A%2301579b%2Cstroke-width%3A2px%0A%20%20%20%20style%20Transport%20fill%3A%23f3e5f5%2Cstroke%3A%234a148c%2Cstroke-width%3A2px%0A",showToolbar:"1"})]),_:1}),s[4]||(s[4]=a(`<h3 id="数据层-data-layer" tabindex="-1">数据层 (Data Layer) <a class="header-anchor" href="#数据层-data-layer" aria-label="Permalink to “数据层 (Data Layer)”">​</a></h3><p>基于 <strong><a href="https://www.jsonrpc.org/" target="_blank" rel="noreferrer">JSON-RPC 2.0</a></strong> 实现，定义消息格式和语义。</p><h4 id="核心功能模块" tabindex="-1">核心功能模块 <a class="header-anchor" href="#核心功能模块" aria-label="Permalink to “核心功能模块”">​</a></h4><p><strong>1. 生命周期管理</strong></p><ul><li>连接初始化和能力协商</li><li>心跳保活</li><li>优雅关闭</li></ul><p><strong>2. 服务器能力</strong></p><ul><li><strong>Tools</strong>: 可执行函数(如文件操作、API 调用)</li><li><strong>Resources</strong>: 上下文数据(如文档内容、数据库记录)</li><li><strong>Prompts</strong>: 交互模板(如预设提示词)</li></ul><p><strong>3. 客户端能力</strong></p><ul><li><strong>Sampling</strong>: 请求 Host 的 LLM 进行推理</li><li><strong>Elicitation</strong>: 向用户请求额外信息</li><li><strong>Logging</strong>: 发送调试日志</li></ul><p><strong>4. 实用功能</strong></p><ul><li><strong>Notifications</strong>: 实时更新通知</li><li><strong>Tasks</strong>: 长时间运行任务的进度跟踪(实验性)</li></ul><h4 id="json-rpc-消息示例" tabindex="-1">JSON-RPC 消息示例 <a class="header-anchor" href="#json-rpc-消息示例" aria-label="Permalink to “JSON-RPC 消息示例”">​</a></h4><p><strong>请求消息:</strong></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;jsonrpc&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;2.0&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;id&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;method&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;tools/list&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;params&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>响应消息:</strong></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;jsonrpc&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;2.0&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;id&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;result&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;tools&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">      {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">        &quot;name&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;search_files&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">        &quot;description&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;在指定目录搜索文件&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">        &quot;inputSchema&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">          &quot;type&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;object&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">          &quot;properties&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">            &quot;query&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> { </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">&quot;type&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;string&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> }</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">            &quot;path&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> { </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">&quot;type&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;string&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>通知消息(无需响应):</strong></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;jsonrpc&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;2.0&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;method&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;notifications/tools/list_changed&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;params&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="传输层-transport-layer" tabindex="-1">传输层 (Transport Layer) <a class="header-anchor" href="#传输层-transport-layer" aria-label="Permalink to “传输层 (Transport Layer)”">​</a></h3><p>负责底层通信通道和安全认证。</p><h4 id="stdio-传输" tabindex="-1">STDIO 传输 <a class="header-anchor" href="#stdio-传输" aria-label="Permalink to “STDIO 传输”">​</a></h4><p><strong>适用场景</strong>: 本地进程通信</p><p><strong>特点</strong>:</p><ul><li>零网络开销,性能最优</li><li>无需处理防火墙/代理</li><li>仅限同一台机器</li></ul><p><strong>启动方式</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"># Host 启动 Server 进程并通过 stdin/stdout 通信</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> /path/to/mcp-server.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="http-传输" tabindex="-1">HTTP 传输 <a class="header-anchor" href="#http-传输" aria-label="Permalink to “HTTP 传输”">​</a></h4><p><strong>适用场景</strong>: 远程服务器通信</p><p><strong>特点</strong>:</p><ul><li>支持跨网络访问</li><li>标准 HTTP 认证(Bearer Token, API Key, OAuth)</li><li>服务器发送事件(SSE)支持流式响应</li><li>需要处理网络安全和延迟</li></ul><p><strong>请求示例</strong>:</p><div class="language-http line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> /mcp </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">HTTP</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">1.1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">Host</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> api.example.com</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">Authorization</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> Bearer &lt;token&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">Content-Type</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;jsonrpc&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;2.0&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;id&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;method&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;tools/call&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;params&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;name&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;search&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;arguments&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> { </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">&quot;query&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;MCP tutorial&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="数据层协议详解" tabindex="-1">数据层协议详解 <a class="header-anchor" href="#数据层协议详解" aria-label="Permalink to “数据层协议详解”">​</a></h2><h3 id="基本元素-primitives" tabindex="-1">基本元素 (Primitives) <a class="header-anchor" href="#基本元素-primitives" aria-label="Permalink to “基本元素 (Primitives)”">​</a></h3><p>MCP 定义了三类核心基本元素，决定了 Server 可以提供哪些能力。</p><h4 id="server-端基本元素" tabindex="-1">Server 端基本元素 <a class="header-anchor" href="#server-端基本元素" aria-label="Permalink to “Server 端基本元素”">​</a></h4><p><strong>1. Tools (工具)</strong></p><p>可被 AI 调用的函数,用于执行操作。</p><p><strong>发现与调用流程</strong>:</p>`,39)),i(l,null,{default:e(()=>[i(n,{code:"sequenceDiagram%0A%20%20%20%20participant%20Client%0A%20%20%20%20participant%20Server%0A%20%20%20%20%0A%20%20%20%20Client-%3E%3EServer%3A%20tools%2Flist%0A%20%20%20%20Server--%3E%3EClient%3A%20%E8%BF%94%E5%9B%9E%E5%B7%A5%E5%85%B7%E6%B8%85%E5%8D%95%0A%20%20%20%20Client-%3E%3EServer%3A%20tools%2Fcall(name%2C%20args)%0A%20%20%20%20Server--%3E%3EClient%3A%20%E8%BF%94%E5%9B%9E%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C%0A",showToolbar:"1"})]),_:1}),s[5]||(s[5]=a(`<p><strong>定义示例</strong>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  name</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;read_file&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  description</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;读取文件内容&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  inputSchema</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    type</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;object&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    properties</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">      path</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">        type</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;string&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">        description</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;文件路径&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    }</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    required</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">&quot;path&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>2. Resources (资源)</strong></p><p>提供上下文数据的只读信息源。</p><p><strong>URI 设计模式</strong>:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span>file:///home/user/documents/report.pdf</span></span>
<span class="line"><span>db://localhost/products/table/users</span></span>
<span class="line"><span>api://github.com/repos/owner/repo/issues/123</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>访问示例</strong>:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;method&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;resources/read&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;params&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;uri&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;file:///home/user/config.json&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>3. Prompts (提示词)</strong></p><p>预定义的交互模板,简化常见任务。</p><p><strong>模板示例</strong>:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;name&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;code_review&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;description&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;代码审查助手&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;arguments&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;name&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;language&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;description&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;编程语言&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;required&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    }</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;name&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;focus&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;description&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;关注点(安全/性能/可读性)&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;required&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="client-端基本元素" tabindex="-1">Client 端基本元素 <a class="header-anchor" href="#client-端基本元素" aria-label="Permalink to “Client 端基本元素”">​</a></h4><p><strong>1. Sampling (采样)</strong></p><p>Server 请求 Host 的 LLM 进行推理。</p><p><strong>使用场景</strong>:</p><ul><li>数据分析和总结</li><li>内容生成</li><li>决策辅助</li></ul><p><strong>请求示例</strong>:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;method&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;sampling/createMessage&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;params&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;messages&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">      {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">        &quot;role&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;user&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">        &quot;content&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;分析这份销售数据并给出建议: [数据]&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    ]</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;maxTokens&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>2. Elicitation (信息征询)</strong></p><p>向用户请求额外输入。</p><p><strong>使用场景</strong>:</p><ul><li>确认敏感操作</li><li>收集缺失参数</li><li>多步骤交互</li></ul><p><strong>请求示例</strong>:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;method&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;elicitation/request&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;params&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;message&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;请选择部署环境&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;schema&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;type&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;object&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;properties&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">        &quot;environment&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">          &quot;type&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;string&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">          &quot;enum&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">&quot;dev&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;staging&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;production&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>3. Logging (日志)</strong></p><p>向 Host 发送调试信息。</p><p><strong>日志级别</strong>:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">enum</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LogLevel</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  DEBUG </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;debug&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  INFO </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;info&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  WARNING </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;warning&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  ERROR </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;error&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><h3 id="生命周期管理" tabindex="-1">生命周期管理 <a class="header-anchor" href="#生命周期管理" aria-label="Permalink to “生命周期管理”">​</a></h3><h4 id="初始化序列" tabindex="-1">初始化序列 <a class="header-anchor" href="#初始化序列" aria-label="Permalink to “初始化序列”">​</a></h4>`,32)),i(l,null,{default:e(()=>[i(n,{code:"sequenceDiagram%0A%20%20%20%20participant%20Client%0A%20%20%20%20participant%20Server%0A%20%20%20%20%0A%20%20%20%20Note%20over%20Client%2CServer%3A%201.%20%E5%BB%BA%E7%AB%8B%E4%BC%A0%E8%BE%93%E8%BF%9E%E6%8E%A5%0A%20%20%20%20Client-%3E%3EServer%3A%20initialize(clientInfo%2C%20capabilities)%0A%20%20%20%20Note%20over%20Server%3A%20%E9%AA%8C%E8%AF%81%E5%8D%8F%E8%AE%AE%E7%89%88%E6%9C%AC%0A%20%20%20%20Server--%3E%3EClient%3A%20serverInfo%20%2B%20capabilities%0A%20%20%20%20%0A%20%20%20%20Note%20over%20Client%2CServer%3A%202.%20%E8%83%BD%E5%8A%9B%E5%8D%8F%E5%95%86%E5%AE%8C%E6%88%90%0A%20%20%20%20Client-%3E%3EServer%3A%20initialized%0A%20%20%20%20%0A%20%20%20%20Note%20over%20Client%2CServer%3A%203.%20%E6%AD%A3%E5%B8%B8%E5%B7%A5%E4%BD%9C%0A%20%20%20%20Client-%3E%3EServer%3A%20tools%2Flist%2C%20resources%2Fread%2C%20etc.%0A%20%20%20%20%0A%20%20%20%20Note%20over%20Client%2CServer%3A%204.%20%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5%0A%20%20%20%20Client-%3E%3EServer%3A%20close%0A",showToolbar:"1"})]),_:1}),s[6]||(s[6]=a(`<h4 id="能力协商示例" tabindex="-1">能力协商示例 <a class="header-anchor" href="#能力协商示例" aria-label="Permalink to “能力协商示例”">​</a></h4><p><strong>Client 声明的能力</strong>:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;capabilities&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;sampling&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;elicitation&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;roots&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;listChanged&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Server 声明的能力</strong>:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;capabilities&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;tools&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;listChanged&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    }</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;resources&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;subscribe&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;listChanged&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    }</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;prompts&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;listChanged&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="通知机制" tabindex="-1">通知机制 <a class="header-anchor" href="#通知机制" aria-label="Permalink to “通知机制”">​</a></h3><p>支持 Server 向 Client 主动推送更新。</p><h4 id="通知类型" tabindex="-1">通知类型 <a class="header-anchor" href="#通知类型" aria-label="Permalink to “通知类型”">​</a></h4><table tabindex="0"><thead><tr><th>通知方法</th><th>触发时机</th><th>用途</th></tr></thead><tbody><tr><td><code>notifications/tools/list_changed</code></td><td>工具清单变化</td><td>提示 Client 重新获取工具列表</td></tr><tr><td><code>notifications/resources/list_changed</code></td><td>资源清单变化</td><td>提示 Client 刷新资源</td></tr><tr><td><code>notifications/resources/updated</code></td><td>资源内容更新</td><td>订阅的资源有新数据</td></tr><tr><td><code>notifications/prompts/list_changed</code></td><td>提示词变化</td><td>提示 Client 更新模板</td></tr></tbody></table><h4 id="资源订阅示例" tabindex="-1">资源订阅示例 <a class="header-anchor" href="#资源订阅示例" aria-label="Permalink to “资源订阅示例”">​</a></h4><p><strong>订阅流程</strong>:</p>`,11)),i(l,null,{default:e(()=>[i(n,{code:"sequenceDiagram%0A%20%20%20%20participant%20Client%0A%20%20%20%20participant%20Server%0A%20%20%20%20%0A%20%20%20%20Client-%3E%3EServer%3A%20resources%2Fsubscribe(uri)%0A%20%20%20%20Server--%3E%3EClient%3A%20%E7%A1%AE%E8%AE%A4%E8%AE%A2%E9%98%85%0A%20%20%20%20%0A%20%20%20%20Note%20over%20Server%3A%20%E6%95%B0%E6%8D%AE%E5%8F%98%E5%8C%96%0A%20%20%20%20Server-%3E%3EClient%3A%20notifications%2Fresources%2Fupdated%0A%20%20%20%20%0A%20%20%20%20Client-%3E%3EServer%3A%20resources%2Fread(uri)%0A%20%20%20%20Server--%3E%3EClient%3A%20%E8%BF%94%E5%9B%9E%E6%9C%80%E6%96%B0%E6%95%B0%E6%8D%AE%0A%20%20%20%20%0A%20%20%20%20Client-%3E%3EServer%3A%20resources%2Funsubscribe(uri)%0A",showToolbar:"1"})]),_:1}),s[7]||(s[7]=a(`<h2 id="协议范围与边界" tabindex="-1">协议范围与边界 <a class="header-anchor" href="#协议范围与边界" aria-label="Permalink to “协议范围与边界”">​</a></h2><h3 id="mcp-负责的部分" tabindex="-1"><u>MCP 负责</u>的部分 <a class="header-anchor" href="#mcp-负责的部分" aria-label="Permalink to “MCP 负责的部分”">​</a></h3><p><strong>定义标准化通信协议</strong></p><ul><li>JSON-RPC 消息格式</li><li>能力发现机制</li><li>生命周期管理</li></ul><p><strong>提供 SDK 和工具</strong></p><ul><li>TypeScript/Python/Java SDK</li><li>MCP Inspector 调试工具</li><li>参考服务器实现</li></ul><p><strong>建立生态系统</strong></p><ul><li>官方服务器目录</li><li>社区贡献指南</li><li>最佳实践文档</li></ul><h3 id="mcp-不负责的部分" tabindex="-1"><u>MCP 不负责</u>的部分 <a class="header-anchor" href="#mcp-不负责的部分" aria-label="Permalink to “MCP 不负责的部分”">​</a></h3><p><strong>LLM 选择和调用</strong></p><ul><li>Host 自行决定使用哪个 AI 模型</li><li>如何利用上下文生成回复</li></ul><p><strong>用户界面设计</strong></p><ul><li>Host 负责 UI/UX</li><li>交互流程由应用定义</li></ul><p><strong>业务逻辑实现</strong></p><ul><li>Server 的具体功能由开发者实现</li><li>MCP 只定义通信标准</li></ul><h2 id="快速开始" tabindex="-1">快速开始 <a class="header-anchor" href="#快速开始" aria-label="Permalink to “快速开始”">​</a></h2><h3 id="使用现有-server" tabindex="-1">使用现有 Server <a class="header-anchor" href="#使用现有-server" aria-label="Permalink to “使用现有 Server”">​</a></h3><p><strong>1. 安装 Claude Desktop</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"># macOS</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> install</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> --cask</span><span style="--shiki-light:#2B5581;--shiki-dark:#9DB1C5;"> claude</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"># 或从官网下载</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"># https://claude.ai/download</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>2. 配置 MCP Server</strong></p><p>编辑配置文件 <code>~/Library/Application Support/Claude/claude_desktop_config.json</code>:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;filesystem&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;command&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;npx&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;args&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">&quot;-y&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;@modelcontextprotocol/server-filesystem&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;/Users/yourname/Documents&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    }</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">    &quot;sqlite&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;command&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;npx&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F8F8F8;">      &quot;args&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">&quot;-y&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;@modelcontextprotocol/server-sqlite&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;/path/to/database.db&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>3. 重启 Claude Desktop</strong></p><p>现在可以在对话中使用文件系统和数据库工具了!</p><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to “最佳实践”">​</a></h2><h3 id="server-设计原则" tabindex="-1">Server 设计原则 <a class="header-anchor" href="#server-设计原则" aria-label="Permalink to “Server 设计原则”">​</a></h3><p><strong>1. 单一职责</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span>✅ 好: SQLite Server 只处理数据库操作</span></span>
<span class="line"><span>❌ 差: 一个 Server 同时处理文件、数据库、API</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2. 幂等性</strong></p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// 工具调用应该是幂等的</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readFile</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(path</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">) {</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">  // ✅ 多次调用返回相同结果</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> fs</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.readFileSync</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(path</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &#39;utf-8&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">);</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deleteFile</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(path</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">) {</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">  // ⚠️ 需要处理已删除的情况</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">fs</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.existsSync</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(path)) {</span></span>
<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">    fs</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.unlinkSync</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(path);</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>3. 错误处理</strong></p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// 返回有意义的错误信息</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">  &quot;error&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">: {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">    &quot;code&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">32602</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">    &quot;message&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;文件不存在: /path/to/file.txt&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">    &quot;data&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">      &quot;path&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;/path/to/file.txt&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">      &quot;suggestion&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &quot;请检查文件路径是否正确&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="client-集成建议" tabindex="-1">Client 集成建议 <a class="header-anchor" href="#client-集成建议" aria-label="Permalink to “Client 集成建议”">​</a></h3><p><strong>1. 优雅降级</strong></p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// Server 不可用时不应阻塞整个应用</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> client</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.connect</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(serverPath);</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">} </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">  console</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.warn</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">&quot;MCP Server 连接失败,部分功能不可用&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">);</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">  // 继续运行,禁用相关功能</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>2. 资源管理</strong></p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes min-light min-dark" style="--shiki-light:#24292eff;--shiki-dark:#b392f0;--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// 确保连接正确关闭</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> client</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.callTool</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#FFAB70;">&quot;expensive_operation&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">);</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">} </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> client</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.close</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">();</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="下一步" tabindex="-1">下一步 <a class="header-anchor" href="#下一步" aria-label="Permalink to “下一步”">​</a></h2><p>根据你的需求选择相应路径:</p><ul><li><p><strong>开发 MCP Server</strong> → 阅读 <a href="./mcp-server.html">MCP Server 开发指南</a></p></li><li><p><strong>集成 MCP 到应用</strong> → 阅读 <a href="./mcp-client.html">MCP Client 开发指南</a></p></li><li><p><strong>安全性问题</strong> → 阅读 <a href="./mcp-security.html">MCP 认证与安全</a></p></li></ul><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to “常见问题”">​</a></h2><details><summary><b>MCP 与 LangChain 有什么区别?</b></summary><ul><li><strong>MCP</strong>: 专注于连接层标准化,轻量级协议</li><li><strong>LangChain</strong>: 全栈 AI 应用开发框架,功能更丰富</li></ul><p>两者可以配合使用,LangChain 可以作为 MCP Host 或 Server。</p></details><details><summary><b>MCP Server 必须用 TypeScript 开发吗?</b></summary><p>不是。官方提供 TypeScript、Python、Java SDK,社区也有其他语言实现。只要遵循 JSON-RPC 2.0 协议,任何语言都可以。</p></details><details><summary><b>远程 Server 如何保证安全?</b></summary><p>推荐使用:</p><ol><li>HTTPS 加密传输</li><li>OAuth 2.0 认证</li><li>API Key 轮换机制</li><li>请求速率限制</li></ol><p>详见<a href="./mcp-security.html">安全最佳实践文档</a>。</p></details><details><summary><b>一个 Host 可以连接多少个 Server?</b></summary><p>理论上无限制,但建议:</p><ul><li>少于 10 个以保证性能</li><li>按需加载,避免一次启动所有 Server</li><li>监控资源使用情况</li></ul></details><h2 id="生态系统资源" tabindex="-1">生态系统资源 <a class="header-anchor" href="#生态系统资源" aria-label="Permalink to “生态系统资源”">​</a></h2><h3 id="开发自定义-server" tabindex="-1">开发自定义 Server <a class="header-anchor" href="#开发自定义-server" aria-label="Permalink to “开发自定义 Server”">​</a></h3><ul><li><a href="./mcp-server.html">开发 MCP Server</a></li><li><a href="./mcp-client.html">开发 MCP Client</a></li><li><a href="./mcp-security.html">认证与安全</a></li></ul><h3 id="官方资源" tabindex="-1">官方资源 <a class="header-anchor" href="#官方资源" aria-label="Permalink to “官方资源”">​</a></h3><ul><li><a href="https://spec.modelcontextprotocol.io/" target="_blank" rel="noreferrer">MCP 规范文档</a></li><li><a href="https://github.com/modelcontextprotocol/typescript-sdk" target="_blank" rel="noreferrer">TypeScript SDK</a></li><li><a href="https://github.com/modelcontextprotocol/python-sdk" target="_blank" rel="noreferrer">Python SDK</a></li><li><a href="https://github.com/modelcontextprotocol/java-sdk" target="_blank" rel="noreferrer">Java SDK</a></li><li><a href="https://github.com/modelcontextprotocol/inspector" target="_blank" rel="noreferrer">MCP Inspector</a></li></ul><h3 id="参考实现" tabindex="-1">参考实现 <a class="header-anchor" href="#参考实现" aria-label="Permalink to “参考实现”">​</a></h3><ul><li><a href="https://github.com/modelcontextprotocol/servers/tree/main/src/filesystem" target="_blank" rel="noreferrer">文件系统 Server</a></li><li><a href="https://github.com/modelcontextprotocol/servers/tree/main/src/sqlite" target="_blank" rel="noreferrer">SQLite Server</a></li><li><a href="https://github.com/modelcontextprotocol/servers/tree/main/src/git" target="_blank" rel="noreferrer">Git Server</a></li><li><a href="https://github.com/modelcontextprotocol/servers" target="_blank" rel="noreferrer">更多官方 Servers</a></li></ul><h3 id="社区支持" tabindex="-1">社区支持 <a class="header-anchor" href="#社区支持" aria-label="Permalink to “社区支持”">​</a></h3><ul><li><a href="https://github.com/modelcontextprotocol/specification/discussions" target="_blank" rel="noreferrer">GitHub Discussions</a></li><li><a href="https://discord.gg/modelcontextprotocol" target="_blank" rel="noreferrer">Discord 社区</a></li><li><a href="https://github.com/modelcontextprotocol/quickstart-resources" target="_blank" rel="noreferrer">示例项目</a></li></ul><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to “总结”">​</a></h2><p>MCP 通过标准化协议解决了 AI 应用与外部系统集成的复杂性:</p><p><strong>开放标准</strong> - 避免供应商锁定<br><strong>清晰分层</strong> - 传输层与业务逻辑分离<br><strong>丰富生态</strong> - 官方和社区提供大量现成 Server<br><strong>安全可靠</strong> - 支持标准认证和授权机制</p>`,57))])}const y=p(k,[["render",B]]);export{u as __pageData,y as default};
